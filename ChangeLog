2010-06-20  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Modernize, improve and extend tests `suffix*.test'.
	* tests/suffix3.test: Enable `errexit' shell flag, and related
	changes.
	* tests/suffix4.test: Likewise.
	* tests/suffix6.test: Likewise, and do not create a useless dummy
	source file.
	* tests/suffix7.test: Likewise.
	* tests/suffix5.test: Enable `errexit' shell flag, and related
	changes.  Make grepping of Makefile.in slighty stricter.
	* tests/suffix.test: Enable `errexit' shell flag, and related
	changes.  Also, do not redirect grep output to /dev/null, as this
	might unmotivatedly hide useful information.
	* tests/suffix2.test: Move setting of `errexit' shell flag earlier
	in the script (just after inclusion of ./defs).  Use a more
	idiomatic way to count text occurrences in Makefile.in with
	grep.  Do not create useless dummy source files.
	* tests/suffix10.test: Ensure verbose printing of captured make
	stdout.  Minor cosmetic changes.
	* tests/suffix8.test: Likewise.  Also, drop useless call to the
	env(1) utility, and make grepping of make output stricter by using
	$FGREP rather than plain grep.
	* tests/suffix11.test: Likewise.
	* tests/suffix12.test: Likewise.
	* tests/suffix9.test: Prefet cat + here-doc over echo to append to
	the `configure.in' stub.  Cosmetic changes.
	* tests/suffix13.test: Cosmetic spacing change.

2010-06-13  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Add useful comment in test script ext.test.
	* tests/ext.test: Add a comment explaining why an apparently
	useless `if' statement is indeed required.

2010-06-13  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Add useful comment in test script obsolete.test.
	* tests/obsolte.test: Add a comment explaining why we need
	an indirection in adding $AUTOUPDATE to $required.

	Normalize whitespaces in 'tests/Makefile.am'.
	* tests/Makefile.am (TESTS): Use only spaces, not tabs, in the
	definition of this variable.

	Parallel tests generation: improve comments (tiny change).
	* tests/Makefile.am ($(parallel_tests)): Added useful comment to
	generated tests.

	Tests defs: truly get rid of `$am_defs_included' (unused variable)
	 * tests/defs.in ($am_defs_included): Remove, its now unused.  It
	should have been removed in a previous changeset, but the removal
	was done only partially (oversight).

2010-06-12  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Remove a couple of unneeded conditionals from tests.
	* tests/pr243.test, tests/pr266.test, tests/strip.test: No need
	for the FOOTEST conditional.

2010-06-12  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Modernize, improve and/or fix various test scripts.
	* tests/symlink3.test: Deleted, separated into two new, more
	complete tests ...
	* tests/forcemiss.test: ... this one ...
	* tests/forcemiss2.test: ... and this one.
	* tests/symlink2.test: Enable `errexit' shell flag, make test
	stricter, and skip it if symlink creation is not supported.
	* tests/postproc.test: Enable `errexit' shell flag, related
	changes, and a couple of unrelated cosmetic changes.
	* tests/recurs.test: Use the `configure.in' stub created by
	`./defs', rather than writing one from scratch.  Make grepping
	of Automake stderr slighty stricter.
	* tests/substtarg.test: Likewise.
	* tests/strip.test: Likewise, and move the call to `set -e'
	earlier (just after the inclusion of `./defs').	Also, make sure
	that the script installed by `make install-script' is equal to
	the original one.
	* tests/substref.test: Use the `configure.in' stub created by
	`./defs', rather than writing one from scratch.  Move the call
	to `set -e' earlier (just after the inclusion of `./defs').
	Avoid to explicitly export CC for configure (that's already done
	in ./defs).  Avoid potential problems with unpredictable make
	output.  Finally, make grepping of Makefile.in stricter.
	* tests/substre2.test: Ensure verbose printing of the captured
	make's output, and make its grepping slighty stricter.
	* tests/cygwin32.test: Enable `errexit' shell flag, and related
	changes.  Also, do not create useless dummy source/data files.
	* tests/scripts.test: Likewise.
	* tests/recurs2.test: Likewise.  Also, use the `configure.in'
	stub created by `./defs'.
	* tests/Makefile.am (TESTS): Updated.

	Modernize, improve and/or fix tests `pluseq*.test.
	* tests/pluseq5.test: Append to configure.in using cat with an
	here-doc, not using echo.
	* tests/pluseq10.test: Make sure that the captured output of
	`make' command is always displayed. Where possible, use $FGREP
	instead of grep (this change makes some checks slighty stricter).
	* tests/pluseq8.test: Enable `errexit' shell flag, with related
	changes.
	* tests/pluseq.test: Likewise.  Also, do not create useless dummy
	data files, and use better m4 quoting in generated configure.in.
	* tests/pluseq2.test: Likewise.  Also, append to configure.in
	using cat with an here-doc, not using echo.
	* tests/pluseq3.test: Likewise.
	* tests/pluseq4.test: Likewise.
	* tests/pluseq6.test: Likewise.
	* tests/pluseq7.test: Do not create useless dummy source file.
	* tests/pluseq9.test: Slighty extended w.r.t. the grepping of
	Automake stderr.  Some unrelated cosmetic changes.

2010-06-12  Stefano Lattarini  <stefano.lattarini@gmail.com>

	cscope.test: ensure verbose printing of captured stderr.
	* tests/cscope.test: Print captured stderr before failing.

2010-06-12  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Testsuite: ensure verbose printing of captured stderr.
	* tests/acloca18.test: Print captured stderr before either failing
	or grepping it.  Be sure to send captured stderr to stderr, not to
	stdout.
	* tests/ansi3b.test: Likewise.
	* tests/cond39.test: Likewise.
	* tests/configure.test: Likewise.
	* tests/missing3.test: Likewise.
	* tests/missing6.test: Likewise.
	* tests/output-order.test: Likewise.
	* tests/pr300-ltlib.test: Likewise.
	* tests/python6.test: Likewise.
	* tests/python7.test: Likewise.
	* tests/python8.test: Likewise.
	* tests/python9.test: Likewise.
	* tests/subobj.test: Likewise.
	* tests/vars3.test: Likewise.
	* tests/missing4.test: Likewise, and fix a call to grep not to use
	the `-c' flag.
	* tests/ansi3.test: Likewise, and rely on the `configure.in' stub
	created by `./defs', rather than writing one from scratch.

	Enable `errexit' shell flag in various tests.
	* tests/backsl.test: Enable the `errexit' shell flag, and
	related changes.
	* tests/backsl2.test: Likewise.
	* tests/block.test: Likewise.
	* tests/canon2.test: Likewise.
	* tests/canon4.test: Likewise.
	* tests/comment2.test: Likewise.
	* tests/condlib.test: Likewise.
	* tests/cond15.test: Likewise, and prefer $FGREP over grep.
	* tests/canon3.test: Likewise.  Also, avoid to create an useless
	dummy source file.
	* tests/acoutpt2.test: Enable the `errexit' shell flag, and some
	related changes.  Do some cosmetic improvements in the generated
	`configure.in' file.
	* tests/cond4.test: Likewise.
	* tests/cond14.test: Likewise.
	* tests/condinc.test: Likewise.
	* tests/cond7.test: Likewise.  Also, remove useless setting of
	AUTOMAKE_OPTIONS to `foreign' in the generated Makefile.am.
	* tests/ansi.test: Enable the `errexit' shell flag, and related
	changes.  Extended, esp. by running autoconf, ./configure and
	make, and by looking into the distdir.

2010-06-12  Stefano Lattarini  <stefano.lattarini@gmail.com>
	    Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Extend tests/README w.r.t. trailing `:' in test scripts.
	* tests/README (section "Writing test cases" subsection "Do"):
	Explain why apparently redundant trailing `:' and `Exit 0' in
	test scripts can indeed be useful.

2010-06-11  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Improve determination of PATH separator in bootstrap script.
	* bootstrap: Detemine what the PATH separator is the same way
	autoconf does.

	Minor improvements in bootstrap script.
	* bootstrap: Consistently use two-spaces indentation.  Cosmetic
	improvement to comments.
	($me): New variable, containing program basename.
	Prepend it to all error messages.

	Testsuite now works with BSD make in parallel mode.
	* tests/defs.in: Unset variables __MKLVL__ and MAKE_JOBS_FIFO,
	which are exported by BSD make when run in parallel mode, and
	which can confuse make processes spawned by our testsuite.
	This change fixes a lot of spurious failure when the testsuite
	is run with BSD make in parallel mode.

2010-06-09  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Modernize, improve and/or fix various test scripts.
	* tests/sanity.test: Rely on the `configure.in' stub created by
	`./defs', rather than writing one from scratch.
	* tests/depend2.test: Likewise.  Also, call `set -e' just after
	the inclusion of `./defs', instead that later in the script.
	* tests/canon5.test: Avoid a useless `|| Exit 1' after a call to
	$AUTOMAKE, and improve the positioning of an $ACLOCAL call.
	* tests/exeext4.test: Use $FGREP instead of grep, where possible.
	Make auxiliary rules in the generated Makefile more silent.
	These changes make some checks slighty stricter.
	* tests/ext2.test: Call `Exit 1' if inclusion of `./defs' fails.
	* tests/gettext2.test: Place final `:' at the end of the script,
	rather than in the middle.
	* tests/exeext.test: Call `set -e' just after the inclusion of
	`./defs', instead that later in the script.
	* tests/extra5.test: Likewise.
	* tests/confdeps.test: Likewise.  Also, prefer `mv -f' over
	plain `mv', just to be sure.
	* tests/depcomp.test: Enable `errexit' shell flag, with related
	changes.  Also, modernize the generated configure.in.
	* tests/cond9.test: Likewise.  Also, rely on the `configure.in'
	stub created by `./defs', rather than writing one from scratch.
	* tests/cond10.test: Likewise.
	* tests/depcomp2.test: Likewise.
	* tests/depend3.test: Likewise.
	* tests/distcom7.test: Likewise.
	* tests/fortdep.test: Likewise.  Also, remove definition of
	AUTOMAKE_OPTIONS to `foreign' in the generated Makefile.am,
	since that flag is already provided by $AUTOMAKE.
	* tests/mdate.test: Made stricter, by checking that Automake
	actually failed, and by	making a stricter grep on the error
	message.  Also, set shell `errexit flag'.
	* tests/python2.test: Improved verbose messages.

	Make test `ammissing.test' stricter.
	* tests/ammissing.test: Fail if $ACLOCAL succeds unexpectedly.
	Enable `errexit' shell flag.

2010-06-08  Stefano Lattarini  <stefano.lattarini@gmail.com>
	    Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Fix error in generation of parallel tests.
	* tests/defs.in ($am_skip_defs): New variable, to be used when
	./defs must be sourced multiple times.  If set, unset it and
	only define $srcdir; otherwise, also go through the rest of
	the script.
	($am_defs_included): Remove, no more needed.
	* tests/Makefile.am ($(parallel_tests)): Update accordingly,
	using only $srcdir from defs.
	Fixes potential test failures of tests that use $required.

2010-06-08  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Enable `errexit' shell flag in some test scripts.
	* tests/subcond.test: Enabled `errexit' shell flag, and related
	minor changes.
	* tests/subst.test: Likewise.
	* tests/vars.test: Likewise.
	* tests/version4.test: Likewise.
	* tests/vpath.test: Likewise.
	* tests/vtexi2.test: Likewise.
	* tests/werror.test: Likewise.
	* tests/whoami.test: Likewise.
	* tests/tags.test: Likewise, and avoid to crate an useless dummy
	header file.
	* tests/acsilent.test: Likewise, and don't use an easily-avoided
	command substitution.
	* tests/unused.test: Likewise, and don't use an easily-avoided
	command substitution.
	* tests/version.test: Likewise, and avoid deprecated constructs
	in the generated `configure.in'.
	* tests/version2.test: Likewise, and avoid deprecated constructs
	in the generated `configure.in'.

2010-06-07  Stefano Lattarini  <stefano.lattarini@gmail.com>
	    Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Improve declaration of dependencies in the testsuite.
	* tests/Makefile.am (check_SCRIPTS): Remove.  Instead, let ...
	($(TEST_LOGS)): ... all test logs depend on the scripts.
	* test/gen-parallel-tests: For each parallel test foo-p.test,
	let `foo-p.log' also depend on `foo.test', since it is sourced.

2010-06-06  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Coverage for TAGS_DEPENDENCIES warning.
	* tests/tags2.test: New test.
	* tests/Makefile.am: Update.

	Coverage for use of anachronistic variables.
	* tests/oldvars.test: New test.
	* tests/Makefile.am: Update.

	Testsuite coverage for bogus macro file serial numbers.
	* tests/acloca18.test: Also test ill-formed serial numbers
	and serial numbers after macro definitions.

	Coverage for aclocal diagnosing underquoted macros.
	* tests/acloca23.test: New test.
	* tests/Makefile.am: Update.

2010-06-06  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Prefer AUTOMAKE_fails over `$AUTOMAKE | grep' in tests.
	* tests/ldadd.test: Enable errexit.  Use AUTOMAKE_fails so
	the verbose log contains all output.
	* tests/mdate.test: Likewise.
	Prompted by Stefano Lattarini's change to discover.test.

2010-06-06  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	More minor message fixes.
	* aclocal.in (scan_file): Fix recommended info command line.
	* automake.in (handle_lib_objects): No need to prepend function
	name to prog_error message.
	(handle_tags): Add missing word and missing space in error
	message.
	(handle_dist): Add missing closing single quote in message.
	Line-wrap one long message for readability.

2010-06-06  Stefano Lattarini  <stefano.lattarini@gmail.com>
	    Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Fix distcheck failure with distributed generated parallel tests.
	* tests/Makefile.am ($(parallel_tests)): Cope with $(srcdir)
	being different from the value at developer `make dist' time.
	* tests/defs.in: Protect against mutiple inclusion, by using ...
	($am_defs_included): ... this new variable.
	($srcdir): Do not compute, but simply define to `@abs_srcdir@'
	as substituted by configure.
	Report, suggestions and first fix by Ralf Wildenhues, final
	patch by Stefano Lattarini.

2010-06-06  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Improve tests link*.test (enable `errexit' shell flag).
	* tests/link_c_cxx.test: Enable `errexit shell flag, and related
	changes.  Also, do not create useless source files.
	* tests/link_dist.test: Likewise.
	* tests/link_f90_only.test: Likewise.
	* tests/link_f_only.test: Likewise.
	* tests/link_fc.test: Likewise.
	* tests/link_fccxx.test: Likewise.
	* tests/link_fcxx.test: Likewise.

2010-06-06  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Improve ext.test semantics, avoid OpenBSD sh errexit issue.
	* tests/ext.test: Inside shell compound command, use
	`if $cmd; then Exit 1; fi' rather than `$cmd && Exit 1', to
	fix failure with OpenBSD sh introduced with last patch.
	Actually ensure that a rule for .EXT.o is created for each
	known extension EXT.

2010-06-06  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Enable `errexit' shell flag in some test scripts.
	* tests/dash.test: Enable `errexit' shell flag, and related
	changes.
	* tests/defun.test: Likewise.
	* tests/defun2.test: Likewise.
	* tests/dejagnu.test: Likewise.
	* tests/double.test: Likewise.
	* tests/distcom2.test: Likewise.
	* tests/empty2.test: Likewise.
	* tests/empty3.test: Likewise.
	* tests/empty4.test: Likewise.
	* tests/exdir.test: Likewise.
	* tests/ext.test: Likewise.
	* tests/extra.test: Likewise.
	* tests/extra2.test: Likewise.
	* tests/extra3.test: Likewise.
	* tests/extra4.test: Likewise.
	* tests/flibs.test: Likewise.
	* tests/fnoc.test: Likewise.
	* tests/fo.test: Likewise.
	* tests/instexec.test: Likewise.
	* tests/ltdeps.test: Likewise.
	* tests/nodep.test: Likewise.
	* tests/nodepcomp.test: Likewise.
	* tests/f90only.test: Likewise, and remove botched/obsoleted
	comments and unecessary commands.
	* tests/fonly.test: Likewise, and removed botched/obsolted
	comments and unecessary commands.
	* tests/discover.test: Likewise, and made stricter.

	Enable `errexit' shell flag in all tests cxx*.test.
	* tests/cxx.test: Enabled `errexit' shell flag, and related
	minor changes.
	* tests/cxxansi.test: Likewise.
	* tests/cxxcpp.test: Likewise.
	* tests/cxxlibobj.test: Likewise.
	* tests/cxxlink.test: Likewise.
	* tests/cxxo.test: Likewise.

	Enable `errexit' shell flag in various tests.
	* tests/acoutnoq.test: Enabled `errexit' shell flag, and related
	minor changes.
	* tests/acoutpt.test: Likewise.
	* tests/acoutqnl.test: Likewise.
	* tests/amassign.test: Likewise.
	* tests/ansi2.test: Likewise.
	* tests/ansi4.test: Likewise.
	* tests/badprog.test: Likewise.
	* tests/checkall.test: Likewise.
	* tests/clean.test: Likewise.
	* tests/colneq2.test: Likewise.
	* tests/colon.test: Likewise.
	* tests/colon5.test: Likewise.
	* tests/colon6.test: Likewise.
	* tests/comment.test: Likewise.
	* tests/compile_f90_c_cxx.test: Likewise.
	* tests/compile_f_c_cxx.test: Likewise.
	* tests/cond3.test: Likewise.
	* tests/cond6.test: Likewise.
	* tests/cond13.test: Likewise.
	* tests/conf2.test: Likewise.
	* tests/confvar.test: Likewise.
	* tests/confvar2.test: Likewise.
	* tests/cond8.test: Likewise, plus a cosmetic change.
	* tests/confh4.test: Likewise.  Also, add in the heading comments
	an excerpt from the original bug report which motivated the
	creation of this test, to make its purpose clearer.

2010-06-06  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Rewrite manual to be gender-neutral.
	* doc/automake.texi (GNU Build System)
	(Standard Directory Variables, General Operation, CVS)
	(Hard-Coded Install Paths, Dependencies As Side Effects):
	Rewrite text to not contain gender-specific pronouns when
	speaking about developers or users, either by avoiding pronouns
	or by addressing them as `you' instead.
	* THANKS: Update.
	Report by Christina Gratorp.

	* AUTHORS: Update.

2010-06-06  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Tiny fix in silent8.test (display output of `make' command).
	* tests/silent8.test: Make sure that the captured output of `make'
	command is always displayed.

	Make tests on user extensibility of silent-rules mode stricter.
	* tests/silent6.test: Made stricter w.r.t. the grepping of the
	output produced by `make'.
	* tests/silent7.test: Likewise.

	Tests on silent-mode for C/Libtool made stricter.
	* tests/silent.test: Made stricter w.r.t. the grepping of the
	output produced by `make'.
	* tests/silent2.test: Likewise.
	* tests/silent4.test: Likewise.
	* tests/silent9.test: Likewise.
	* tests/silent3.test: Likewise, and add a final `make distclean'
	command to keep it better in sync with tests/silent{4,9}.test.

	Improved test silent5.test.
	* tests/silent5.test: Remove by hand all generated C files after
	non-verbose builds, to ensure the following builds are clean.
	Try to clean and rebuild with the same verbosity and without
	removing generated sources in between, to check that this does
	not trigger a different set of rules.  Make grepping of make's
	output stricter.  Improved/added some comments.

	New tests for Automake silent-mode with Fortran.
	* tests/silentf77.test: New test.
	* tests/silentf90.test: Likewise.
	* tests/Makefile.am (TESTS): Updated accordingly.

	New test `silentcxx.test' (Automake silent-mode with C++).
	* tests/silentcxx.test: New test.
	* tests/Makefile.am (TESTS): Updated accordingly.

	New test `silentyacc.test' (Automake silent-mode with Yacc).
	* tests/silentyacc.test: New test.
	* tests/Makefile.am (TESTS): Updated accordingly.

	New test `silentlex.test' (Automake silent-mode with Lex).
	* tests/silentlex.test: New test.
	* tests/Makefile.am (TESTS): Updated accordingly.

	Relax tests on silent-rules to cater to overly verbose makes.
	* tests/silent.test: When testing silent builds, don't fail if
	make's output simply contains the `mv' substring, but only if
	it contains the `mv ' substring (note the trailing space).
	* tests/silent2.test: Likewise.
	* tests/silent3.test: Likewise.
	* tests/silent4.test: Likewise.
	* tests/silent5.test: Likewise.
	* tests/silent9.test: Likewise.

2010-05-23  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Extend test on `nostdinc' automake option.
	* tests/nostdinc.test: Enable `errexit' shell flag.  Related and
	unrelated minor changes.  Make the grepping of the generated
	Makefile.in slighty stricter.  Generate and run configure, so that
	the generated Makefile can be grepped too.

2010-05-23  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Make gnupload portable to EBCDIC hosts.
	* lib/gnupload: Use literal newline as argument for 'tr' rather
	than \015, for EBCDIC hosts.  Also, avoid unportable nested
	double-quotes and backquotes.
	* THANKS: Update.
	Report from Eric Blake and Steve Goetze via gnulib.

2010-05-23  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Fix Autoconf version required by Automake's configure.
	Automake configure script used to tell that automake required
	autoconf 2.60 or later, but then it checked for autoconf >= 2.62,
	and if that was not found, it gave an error saying that Automake
	required configure 2.61a-341 or later.  This change should
	eliminate such inconsistencies.
	* configure.ac ($required_autoconf_version): New variable.
	Use it throughout.

2010-05-23  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Fix truncated comment in Makefile.am.
	* Makefile.am (sc_tests_logs_duplicate_prefixes): Fix unfinished
	sentence in comment.
	Report by Stefano Lattarini.

	Relax silent8.test for NetBSD make.
	* tests/silent8.test: Accept ./foo.info in output as well.

	Fix unportable sed script in maintainer-check test.
	* Makefile.am (sc_tests_Exit_not_exit): Rewrite sed script to
	not contain semicolon after 'b' or brace commands, for NetBSD.

	Wildcards are not portable to NetBSD make.
	* doc/automake.texi (Wildcards): Document portability issue.
	* tests/extra10.test, tests/extra11.test, tests/extra12.test:
	Require GNU make.

2010-05-23  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Make test for configure.in vs. configure.ac stricter.
	* tests/configure.test: Use a configure.in file that provokes
	an automake error, to ensure configure.ac is preferred.

	Avoid possible false negatives in dejagnu7.test.
	* tests/dejagnu7.test: Enable shell `errexit' flag.  Also, avoid
	unportable use of fgrep option `-e'.

	Fix conflnk3.test to work with Solaris/Heirloom Sh.
	* tests/conflnk3.test: Use `test -r FILE' and `test ! -r FILE'
	instead of respectively `test -e FILE' and `test ! -e FILE',
	since Solaris Sh doesn't grok the latter.  Do not SKIP the test
	if the shell doesn't support `test -e'.

2010-04-25  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Warning and error message formatting cleanups.
	* aclocal.in (parse_arguments, main): Remove trailing period or
	newline in error or warning messages, avoid capitalization of
	the first word of a message.
	* automake.in (check_user_variables, handle_languages)
	(handle_ltlibraries, scan_aclocal_m4, scan_autoconf_config_files)
	(scan_autoconf_files, cond_stack_if, require_file_internal)
	(usage, generate_makefile, parse_arguments): Likewise.
	* lib/Automake/ChannelDefs.pm (set_strictness): Likewise.
	* lib/Automake/Configure_ac.pm (find_configure_ac): Likewise.
	* lib/Automake/Options.pm (set_strictness): Likewise.
	* lib/Automake/Rule.pm (define): Likewise.
	* lib/Automake/Variable.pm (define, variables_dump): Likewise.
	* tests/ltinstloc.test, tests/suffix11.test: Adjust expected
	error message.
	* lib/Automake/Channels.pm (setup_channel): Reword error message
	to be the same as in msg.

	Fix placing of ellipses in English text and synopses.
	* Makefile.am: Be sure to add a space before `...' in natural
	language text.
	* automake.in (scan_autoconf_traces): Likewise.
	* lib/Automake/Rule.pm (define): Likewise.
	* lib/Automake/Variable.pm (define): Likewise.
	* lib/am/dejagnu.am: Likewise.
	* lib/am/progs.am: Likewise.
	* lib/gnupload (dprint, upload): Likewise.
	* tests/confdeps.test: Likewise.
	* tests/location.test: Adjust expected output.
	* automake.in (usage): In synopsis, use singular for OPTION,
	* remove space before ellipsis.
	* aclocal.in (usage): Likewise.  Also, fix indentation.

	Fix more duplicate message prefixes.
	* lib/Automake/XFile.pm (seek): Do not prepend $me.
	($me): Remove now-unused package-global.
	* aclocal.in (check_acinclude): Remove duplicate 'warning: '
	prefix.

	Fix typo in manual.
	* doc/automake.texi (Simple Tests using parallel-tests): Add
	missing closing parenthesis.

	Fix leftover call to removed function macros_dump.
	* automake.in (read_main_am_file): Call variables_dump, not
	macros_dump.  Print actual error before list of variables.

2010-04-22  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Minor improvements in comments of test `silent3.test'.
	* tests/silent3.test: Tell to keep it in sync with `silent9.test'
	too.

2010-04-25  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	testsuite: ensure verbose printing of captured output.
	* tests/acloca14.test, tests/acloca18.test, tests/aclocal.test,
	tests/fort2.test, tests/help.test, tests/missing3.test,
	tests/missing6.test: Print captured stdout or stderr before
	grepping it.

2010-04-20  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Make test badopt.test stricter (by enabling `set -e').
	* tests/badopt.test: Add call to `set -e'.  Due to this change,
	an unexpected failure in the call to `$ACLOCAL' (whose outcome
	was previously unchecked) would cause the whole test to fail.
	Also, bumped the copyright years.

	Make test for configure.in vs. configure.ac stricter.
	* tests/configure.test: Use a configure.in file that provokes
	an automake error, to ensure configure.ac is preferred.

	Use `set -e' in confsub.test (avoids possible false negatives).
	* tests/confsub.test: Enable shell `errexit' flag, and related
	changes (this helps avoiding some possible minor false negatives).
	Also, bumped copyright years.

2010-04-20  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Fix -Werror handling for presence of configure.in and configure.ac.
	* lib/Automake/Variable.pm (Automake::Variable): Do not initialize
	$configure_ac at the global level, before command-line arguments
	have been parsed.
	(require_variables): Initialize it here.
	* tests/configure.test: New test.
	* tests/Makefile.am: Update.
	Report by Stefano Lattarini.

2010-04-20  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Avoid possible false negatives in confh5.test.
	* tests/confh5.test: Enable shell `errexit' flag, and bumped
	copyright years.  Due to this change, any unexpected failure
	in calls to $ACLOCAL, $AUTOMAKE, $AUTOCONF or $AUTOHEADER, or
	a failure in grepping expected text in output files should now
	cause the whole test to fail.

2010-04-17  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Fixed typo in POD documentation of Automake::Channels.
	* lib/Automake/Channels.pm: Fixed typo in POD documentation:
	@<...> was used instead of C<...>.

2010-04-14  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Refactor tests on Automake TESTS color output.
	* tests/color.test: Tests using the expect program moved out to...
	* tests/color2.test: ... this new file.
	* tests/Makefile.am (TESTS): Extended accordingly.

2010-04-12  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Fix typos in comments in test confh5.test
	* tests/confh5.test: Fix a couple of typos in comments.

	Avoid possible false negatives in canon-name.test.
	* tests/canon-name.test: Enable shell `errexit' flag.  Improve
	test description.

2010-04-11  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Print 'warnings are treated as errors' note if needed.
	* lib/Automake/Channels.pm: Fix typo in comment.
	(_print_message): If -Werror is enabled, print a 'warnings are
	treated as errors' note before the first such warning.
	* tests/warnopts.test: Adjust comment to mention expected warning.
	Adjust code to ignore 'warnings are treated as errors' note.
	* tests/location.test: Adjust expected output with -Werror.
	* tests/werror4.test: New test.
	* tests/Makefile.am: Update.
	* NEWS: Update.

	Ensure we don't print 'warning:' or 'error:' twice.
	* Makefile.am (sc_ensure_testsuite_has_run): New helper rule.
	(sc_tests_logs_duplicate_prefixes): New rule, to check for
	wrong-looking warning and error messages in the test suite logs.
	* aclocal.in (scan_configure_dep, scan_file): Remove duplicate
	`warning: ' prefix.
	* tests/vars3.test: Rename variable to avoid false positive.

	Prepend type to warning, error, and fatal messages.
	For the first part of messages of types `error' or `fatal',
	prepend `error: ' to the message.  Prepend `warning: ' to
	warning messages, whatever the setting of -Werror.
	* lib/Automake/Channels.pm (partial): Move up definition.
	(_format_message): Emit `header' and `footer' strings only with
	the first resp. last part of a set of partial messages.
	* lib/Automake/ChannelDefs.pm: Add missing '1;' statement at the
	end of the module.
	(Automake::ChannelDefs): Setup warning channels with header
	`warning: ', error and fatal messages with header `error: '.
	* tests/condinc2.test, tests/ltinstloc.test: Adjust expected
	error messages.
	* tests/comment5.test: Likewise.  Also, include stack notes
	should not start with `error:'.
	* tests/location.test: Likewise.  Also, try both -Werror and
	-Wno-error.
	* NEWS: Update.
	Report by Bruno Haible.

	Fix capitalization of error messages, reword one message.
	* lib/Automake/Variable.pm (define): Do not capitalize the first
	word in the error message.
	* automake.in (require_file_internal): Likewise.  Also, reword
	and line-wrap for better readability.
	* tests/distcom7.test, tests/pluseq5.test, tests/pluseq9.test:
	Adjust tests.

	Fix connected warnings about obsolete exeext override.
	* lib/Automake/Rule.pm (define): Merge two warnings that belong
	together, by setting the 'partial' flag for the first one.

	Fix per-Makefile.am setting of -Werror.
	Before this patch, 'AUTOMAKE_OPTIONS = -Werror' in one
	Makefile.am would carry over to other Makefile.am files
	treated afterwards by the same thread, causing inconsistent
	and unstable exit status values.
	* lib/Automake/Channels.pm (dup_channel_setup)
	(drop_channel_setup): Save and restore the setting of
	$warnings_are_errors.
	* tests/werror3.test: New test.
	* tests/Makefile.am: Adjust.
	* NEWS: Update.

2010-04-11  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Bugfix in confh5.test w.r.t. Solaris/Heirloom Sh.
	* tests/confh5.test: In the generated Makefile.am: do not use
	`test ! -e FILE' to check for the non-existence of a file, since
	that is not supported by Solaris/Heirloom Sh.

	Make test `aclocal3.test' stricter.
	* tests/aclocal3.test: Add call to `set -e'.  Fail if $ACLOCAL
	succeds unexpectedly.

	Add tests checking that symlinks are resolved by `make dist'.
	* tests/distlinks.test: New test.
	* tests/Makefile.am (TESTS): Updated accordingly.
	Suggested by observations from Ralf Wildenhues.

2010-04-11  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Use -9 for maximum xz compression with dist-xz.
	* lib/am/distdir.am (dist-xz, dist, dist-all): Pass -9 to xz.
	* NEWS, THANKS: Update.
	Report by Pavel Sanda.

2010-04-11  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Avoid possible false negatives in cond46.test.
	* tests/cond46.test: Enable shell `errexit' flag (and bumped
	copyright years).  Due to this change, the testcase should now
	fail on unexpected failures in calls to $ACLOCAL/$AUTOMAKE (whose
	outcomes were previously unchecked), and on failures in grepping
	the expected diagnostic in Automake stderr.

2010-04-04  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Generated tests are now just a thin layer around other tests.
	* tests/Makefile.am: Rewrite the rule to generate the `*-p.test'
	test scripts so that any of them simply includes the corresponding
	`*.test' script (after setting `$parallel_tests' to `yes').
	* tests/.gitignore: Add wildcard for temporary files used in the
	generation of `*-p.test' tests.

2010-03-30  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Avoid an unportable use of `$status' shell variable.
	* Makefile.am (path-check): Don't use the `$status' shell variable
	in the target's rules, as it's special in Zsh (equivalent to `$?',
	and readonly).

	Avoid another use of `chmod -R'.
	* Makefile.am (path-check): To be safe, do not use `chmod -R' on
	$(distdir) before removing it (as Solaris `chmod -R' touches
	symlink targets).  Instead, use the cleanup strategy used in
	distdir.am.

2010-03-28  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Remove uses of @acronym and @sc.
	* doc/automake.texi (Public Macros, Limitations on File Names):
	Remove all usage of @acronym and @sc in the manual.
	Suggested by Karl Berry.

2010-03-13  Karl Berry  <karl@freefriends.org>

	GNU hello uses fdl.texi, not gpl.texi.
	* doc/automake.texi (Texinfo): Adjust example to upstream
	change.

2010-03-06  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Formatting cleanups in macro comments.
	* automake.in, lib/Automake/Channels.pm,
	lib/Automake/FileUtils.pm, lib/Automake/Options.pm,
	lib/Automake/Variable.pm, lib/Automake/XFile.pm,
	m4/options.m4, m4/substnot.m4: Fix macro comment format.

2010-03-04  Stefano Lattarini  <stefano.lattarini@gmail.com>
	    Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Avoid generation of `tests/defs-p' file.
	* tests/defs.in: In the generated `configure.in' snippet: call
	`AM_INIT_AUTOMAKE' with the `parallel-tests' option if the shell
	variable `parallel_tests' is set to `yes'.
	* tests/Makefile.am (defs-p): Target removed.
	(check_SCRIPTS): Removed `defs-p'.
	(clean-local-check): Do not unlink `defs-p' anymore.
	($(parallel_tests)): Transformation rules for the test scripts
	adjusted.
	* tests/gen-parallel-tests: Selection rules for the test
	scripts adjusted.
	* tests/parallel-tests.test: Set `$parallel_tests' to `yes'
	then include `./defs' (rather than simply including `./defs-p').
	* tests/parallel-tests2.test: Likewise.
	* tests/parallel-tests3.test: Likewise.
	* tests/parallel-tests4.test: Likewise.
	* tests/parallel-tests5.test: Likewise.
	* tests/parallel-tests6.test: Likewise.
	* tests/parallel-tests7.test: Likewise.
	* tests/parallel-tests8.test: Likewise.
	* tests/parallel-tests9.test: Likewise.
	* tests/parallel-tests10.test: Likewise.
	* tests/README (Section "Writing Test Cases" subsection "Do"):
	Adjusted the parts referring to tests checking `parallel-tests'
	behaviour.  Some other minor related improvements.
	* tests/.gitignore (defs-p): Removed.

2010-03-04  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Remove redundant unset of variable TESTS from some test scripts.
	* tests/color.test: Do not unset the `TESTS' variable, as it's
	already unset in the `defs' file.
	* tests/check5.test: Likewise.
	* tests/check8.test: Likewise.
	* tests/check9.test: Likewise.
	* tests/check10.test: Likewise.
	* tests/check11.test: Likewise.
	* tests/parallel-tests.test: Likewise.
	* tests/parallel-tests3.test: Likewise.
	* tests/parallel-tests4.test: Likewise.
	* tests/parallel-tests5.test: Likewise.
	* tests/parallel-tests6.test: Likewise.
	* tests/parallel-tests7.test: Likewise.

2010-03-01  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Fix cscope test on systems without working Fortran compiler.
	* tests/cscope.test: Skip remainder of test if `$MAKE all' fails.
	* THANKS: Update.
	Report by Peter Johansson.

2010-02-24  Antonio Diaz Diaz  <ant_diaz@teleline.es>  (tiny change)
	    Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Add lzip compression support.
	* automake.in (handle_dist): Recognize dist-lzip.
	(make_paragraphs): Map LZIP to dist-lzip.
	* doc/automake.texi (Dist): Add dist-lzip.
	(Options): Likewise.
	* lib/Automake/Options.pm (_process_option_list): Add dist-lzip.
	* lib/am/distdir.am
	(dist dist-all): Add command to create an lzip-compressed tarball.
	(distcheck): Handle lzip-compressed tarballs just like the others.
	* tests/defs.in: Test for lzip, too.
	* tests/lzip.test: New file, based on nogzip.test.
	* tests/Makefile.am (TESTS): Add lzip.test.
	* NEWS: Update.

2010-02-22  Karl Berry  <karl@gnu.org>

	Improve help message of mdate-sh.
	* mdate-sh: mention actual output format in help message.

2010-02-22  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Deprecate dist-lzma in favor of dist-xz.
	* doc/automake.texi (The Types of Distributions, Options):
	Adjust text to reflect renaming of lzma to xz.
	* NEWS: Update.
	Missing deprecation noted by Antonio Diaz Diaz.

2010-02-20  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Add tests about support of wildcards in EXTRA_DIST.
	* tests/extra10.test: New test, check basic support of wildcards
	in EXTRA_DIST.
	* tests/extra11.test: New test, check more complex usage of
	wildcards in EXTRA_DIST.
	* tests/extra12.test: New test, check usage of wildcards in
	EXTRA_DIST when $builddir != $srcdir.
	* tests/Makefile.am (TESTS): Updated accordingly.
	Necessity of these new tests suggested by Braden McDaniel
	and Ralf Wildenhues.

2010-02-08  Simon Josefsson  <simon@josefsson.org>

	Fix copyright statement in gnupload script.
	* lib/gnupload: Fix copyright statement.

2010-02-06  Dmitry V. Levin  <ldv@altlinux.org>  (tiny change)
	    Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Fix exit status of signal handlers in shell scripts.
	The value of `$?' on entrance to signal handlers in shell scripts
	cannot be relied upon, so set the exit code explicitly to
	128 + SIG<SIGNAL>.
	* lib/am/check.am (am__check_pre): Use `exit 143' in signal handler.
	* lib/elisp-comp: Likewise.
	* lib/install-sh: Likewise.
	* lib/ylwrap: Likewise.  Also, fix script to trap signal 13, not 3.
	* NEWS, THANKS: Update.
	Bug report, analysis, and initial patch by Dmitry V. Levin.

2010-02-06  Karl Berry  <karl@gnu.org>

	Improve gnupload usage text.
	* gnupload (usage): Shorten to make more likely to fit on a tty
	line.  Mention CMD in the synopsis.  With ..., plural is implied.

2010-01-28  Christos Kontas  <xakon@yahoo.com>  (tiny change)

	Fix some typos in the manual
	* doc/automake.texi (Nested Packages, Rebuilding): Fix typos.

2010-01-24  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Fix silent-rules output for disabled dependency tracking.
	* lib/am/depend2.am [!%FASTDEP%]: Rework silent-rules variable
	expansion code to also work in the case where %AMDEP% expands
	to FALSE at config.status time, using new substitution string
	%VERBOSE-NODEP%.
	* automake.in (verbose_nodep_flag): New function, appending
	`@am__nodep@' to the verbose-variable name.
	(handle_languages): If dependencies are not disabled, use it to
	set %VERBOSE-NODEP%.
	* m4/depend.m4: Substitute am__nodep as '_no', so the second
	verbose-variable will always expand to an empty string, if
	dependencies are enabled.
	* tests/silent5.test: Also test --disable-dependency-tracking;
	also test per-target flags for non-C language files.
	* tests/silent9.test: New test, like silent4.test but disable
	dependency tracking.
	* tests/Makefile.am: Adjust.
	* NEWS, THANKS: Update.
	Report by Dmitry V. Levin <ldv@altlinux.org>.

2010-01-17  Stefano Lattarini  <stefano.lattarini@gmail.com>

	Slighty improve tests acoutbs.test and acoutbs2.test.
	* tests/acoutbs2.test: Enable `errexit' shell flag.  Check that
	autoconf and configure work, that the file `zot' is created by
	configure, and that no file containing a backslash in its name is
	created.
	* tests/acoutbs.test: Likewise, plus updated copyright years.

	Fix test acoutbs2.test.
	* tests/acoutbs2: In the generated configure.in: add proper calls
	to AC_INIT and AM_INIT_AUTOMAKE, and remove explicit definition of
	PACKAGE and VERSION. Add a call to aclocal before calling automake.
	Updated copyright years.
	* tests/Makefile.am (XFAIL_TESTS): Removed acoutbs2.test.

	Add forgotten test scripts to $(TESTS).
	* tests/Makefile.am (TESTS): Added test scripts present on the
	filesystem, which were erroneously left out from $(TESTS):
	acoutbs2.test, badopt.test, extra2.test.
	(XFAIL_TESTS): Added acoutbs2.test.

2010-01-17  Ralf Wildenhues  <Ralf.Wildenhues@gmx.de>

	Sync auxiliary files from upstream.
	* INSTALL, lib/INSTALL, lib/config.guess, lib/config.sub:
	Sync from upstream.

	Bump copyright years.
	* aclocal.in (write_aclocal, version): Bump copyright years.
	* automake.in (gen_copyright, version): Likewise.
	* doc/automake.texi: Likewise.

	Rotate ChangeLog.
	* ChangeLog.09: New file, rotated from ...
	* ChangeLog: ... here.
	* Makefile.am (EXTRA_DIST): Distribute ChangeLog.09.

-----

Copyright (C) 2010  Free Software Foundation, Inc.

Copying and distribution of this file, with or without modification, are
permitted provided the copyright notice and this notice are preserved.

;; Variables:
;; coding: utf-8
;; End:
